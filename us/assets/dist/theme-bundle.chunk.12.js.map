{"version":3,"sources":["webpack:///./assets/js/theme/category.js","webpack:///./assets/js/theme/common/models/forms.js","webpack:///./assets/js/theme/common/utils/form-utils.js","webpack:///./assets/js/theme/common/utils/translations-utils.js","webpack:///./assets/js/theme/common/utils/url-utils.js","webpack:///./assets/js/theme/catalog.js","webpack:///./assets/js/theme/common/faceted-search.js"],"names":["Category","_CatalogPage","context","_this2","call","validationDictionary","createTranslationDictionary","url","window","location","pathname","loaderDiv","$overlay","$","previewModal","modalFactory","_proto","prototype","onReady","console","log","this","outFitIdeas","allIds","jQuery","map","parseInt","attr","get","gql","toString","length","initFacetedSearch","onSortBySubmit","bind","hooks","on","role","infScroll","infiniteScroll","_context","body","path","items","response","forEach","item","id","push","carousel","hide","document","removeClass","addClass","backInStockKlaviyo","productid","variantid","producttitle","text","val","mouseup","e","container","is","target","has","submit","preventDefault","formData","FormData","ajax","type","data","processData","contentType","cache","success","error","err","start","end","_this","allowScroll","paginateOutFit","categories","scrollTop","height","removeModalOnMobile","isMobile","width","removeAttr","html","i","generateOutfitHtml","append","category","imageUrl","image","replace","imageAlt","alt","elem","querySelector","InfiniteScroll","history","hideNav","scrollThreshold","_this$validationDicti","onMinPriceError","price_min_evaluation","onMaxPriceError","price_max_evaluation","minPriceNotEntered","price_min_not_entered","maxPriceNotEntered","price_max_not_entered","onInvalidPrice","price_invalid_value","$productListingContainer","$facetedSearchContainer","requestOptions","config","shop_by_price","products","limit","categoryProductsPerPage","template","productListing","sidebar","showMore","facetedSearch","FacetedSearch","content","triggerHandler","animate","validationErrorMessages","CatalogPage","forms","email","value","test","password","notEmpty","inputTagNames","createPasswordValidationErrorTextObject","empty","confirm","mismatch","invalid","onEmptyPasswordErrorText","onConfirmPasswordErrorText","onMismatchPasswordErrorText","onNotValidPasswordErrorText","classifyForm","formSelector","options","$form","$inputs","find","join","_options$formFieldCla","formFieldClass","each","__","input","specificClassName","$input","$formField","parent","tagName","prop","toLowerCase","className","inputType","_includes","_camelCase","_capitalize","classifyInput","insertStateHiddenField","$stateField","stateFieldAttrs","name","$field","fieldId","match","getFieldId","after","Validators","setEmailValidation","validator","field","errorText","add","selector","validate","cb","errorMessage","setPasswordValidation","passwordSelector","password2Selector","requirements","_ref","isOptional","$password","passwordValidations","result","RegExp","alpha","numeric","minlength","setMinMaxPriceValidation","selectors","priceValidationErrorTexts","errorSelector","fieldsetSelector","maxPriceSelector","minPriceSelector","_priceValidationError","configure","form","preventSubmit","successClass","setMessageOptions","errorSpan","setStateCountryValidation","cleanUpStateValidation","$fieldClassElement","Object","keys","nod","classes","hasClass","isTranslationDictionaryNotEmpty","dictionary","activeDictionary","arguments","JSON","parse","undefined","chooseActiveDictionary","validationDictionaryJSON","validationFallbackDictionaryJSON","validationDefaultDictionaryJSON","localizations","values","key","split","pop","reduce","acc","urlUtils","getUrl","search","goToUrl","pushState","title","trigger","replaceParams","params","param","parsed","Url","hasOwnProperty","query","format","buildQueryString","queryData","out","Array","isArray","ndx","substring","parseQueryParams","temp","_PageManager","apply","event","currentTarget","href","queryParams","serialize","page","PageManager","defaultOptions","accordionToggleSelector","blockerSelector","clearFacetSelector","componentSelector","facetNavListSelector","priceRangeErrorSelector","priceRangeFieldsetSelector","priceRangeFormSelector","priceRangeMaxPriceSelector","priceRangeMinPriceSelector","showMoreToggleSelector","facetedSearchFilterItems","modal","modalOpen","callback","_extend","collapsedFacets","collapsedFacetItems","collapsibleFactory","initPriceValidator","index","navList","collapseFacetItems","accordionToggle","collapsible","isCollapsed","targetId","setTimeout","collapseAllFacets","onStateChange","onToggleClick","onAccordionToggle","onClearFacet","onFacetClick","onRangeSubmit","filterFacetItems","bindEvents","refreshView","restoreCollapsedFacets","restoreCollapsedFacetItems","updateView","show","api","getPage","Error","customLoadProductSizes","li","proID","forProID","proPrice","discountedPrice","Number","trim","toFixed","utils","product","getById","availableSizes","obj","expandFacetItems","$navList","_without","hasMoreResults","_union","toggleFacetItems","getMoreFacetResults","_this3","facet","facetUrl","open","list_all","updateContent","close","$items","element","indexOf","expandFacet","$accordionToggle","collapseFacet","_this4","expandAllFacets","_this5","priceRangeValidator","_this6","_this7","unbindEvents","onPopState","off","stopPropagation","$toggle","$link","toggleClass","urlQueryParams","assign","areAll","constants","VALID","decodeURI","reload","currentUrl","URLSearchParams","updatedLinkUrl","replaceState"],"mappings":"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","file":"theme-bundle.chunk.12.js","sourcesContent":["import { hooks } from '@bigcommerce/stencil-utils';\nimport CatalogPage from './catalog';\nimport compareProducts from './global/compare-products';\nimport FacetedSearch from './common/faceted-search';\nimport { createTranslationDictionary } from '../theme/common/utils/translations-utils';\nimport utils from \"@bigcommerce/stencil-utils\";\nimport jquerymatchheight from 'jquery-match-height';\nimport { normalizeFormData } from './common/utils/api';\nimport modalFactory, { showAlertModal, modalTypes } from './global/modal';\n// import 'slick-carousel';\nimport carousel from './common/carousel';\nimport InfiniteScroll from 'infinite-scroll';\n\nimport gql from './custom/gql';\n\n\n\nexport default class Category extends CatalogPage {\n    constructor(context) {\n        super(context);\n        this.validationDictionary = createTranslationDictionary(context);\n        this.url = window.location.pathname;\n        this.loaderDiv = '<div id=\"loaderimage\" class=\"loadingOverlay ss\" style=\"display: block;\"></div>';\n        this.$overlay = $('[data-cart-item-add] .loadingOverlay');\n\n        this.previewModal = modalFactory('#previewModal')[0];\n    }\n\n    onReady() {\n        console.log('categoryyyyyyy.js');\n\n        this.outFitIdeas(this.context);\n\n        var allIds = jQuery('#product-listing-container [data-productid]').map(function() {\n            return parseInt(jQuery(this).attr('data-productid'));\n        }).get();\n        // $('#product-listing-container').attr('data-current-products', allIds.toString());\n        new gql(this.context, allIds.toString());\n        \n\n        if ($('#facetedSearch').length > 0) {\n            this.initFacetedSearch();\n        } else {\n            this.onSortBySubmit = this.onSortBySubmit.bind(this);\n            hooks.on('sortBy-submitted', this.onSortBySubmit);\n        }\n\n        $('a.reset-btn').on('click', () => {\n            $('span.reset-message').attr({\n                role: 'status',\n                'aria-live': 'polite',\n            });\n        });\n\n        if($('.pagination-item--next .pagination-link').length > 0) {\n            let infScroll = this.infiniteScroll();\n            let _context = this.context;\n\n            infScroll.on( 'append', function( body, path, items, response ) {\n\n                var allIds = [];\n                items.forEach(item => {\n                    var id = parseInt($(item).attr('data-productid'));\n                    allIds.push(id);\n                });\n                // $('#product-listing-container').attr('data-current-products', allIds.toString());\n                new gql(_context, allIds.toString());\n\n                carousel();\n            });\n            infScroll.on( 'last', function( body, path ) {\n                $('.loader-ellips').hide();\n            });\n        }\n\n        $(document).on('touchstart', '.product.product--outfits', function(){\n            $('.product.product--outfits').removeClass('active');\n            $(this).addClass('active');\n        });\n\n        this.backInStockKlaviyo();\n    }\n\n    backInStockKlaviyo(){\n        $(document).on(\"click\", \".notifyMe\", function(){\n            var productid = $(this).attr(\"id\");\n            var variantid = $(this).attr(\"data-product-variant\");\n            var producttitle = $(\".card-title-\" + productid).text();  \n\n            if($('#manual-bis-product').length > 0) {\n                $('#manual-bis-product').val(productid);\n                $('#manual-bis-variant').val(variantid);\n                $('#manual-bis-product-name').text(producttitle);\n                $(\".manual-bis-message\").addClass(\"d-none\");\n                $(\".manual-bis-success\").addClass(\"d-none\");\n                $(\".manual-bis-popup\").removeClass(\"d-none\");\n            }\n        });\n        $(document).on(\"click\", \"#manual-bis-form-close\", function(){\n            $(\".manual-bis-popup\").addClass(\"d-none\");\n        });\n        $(document).mouseup(function(e) {\n            var container = $(\"#manual-bis .popup-content\");\n            if (!container.is(e.target) && container.has(e.target).length === 0){\n            $(\"#manual-bis\").addClass(\"d-none\");\n            }\n        });\n        $('#manual-bis-form').submit( function(e){\n            e.preventDefault();\n            var formData = new FormData($(this)[0]);\n            $.ajax({\n                type: \"POST\",\n                url: \"https://a.klaviyo.com/onsite/components/back-in-stock/subscribe\",\n                data: formData,\n                processData: false,\n                contentType: false,\n                cache: false,\n                success: function(response){\n                    console.log(response);\n                    $(\".manual-bis-success\").removeClass(\"d-none\");\n                },\n                error: function(err) {\n                    console.error(err);\n                    $(\".manual-bis-message\").removeClass(\"d-none\");\n                }\n            });\n        });\n    }\n\n    outFitIdeas(context) {\n        if($('.product-listing-container-outfit-ideas').length == 0) return;\n\n        let perPage = 12;\n        let start = 0;\n        let end = perPage;\n        let _this = this;\n        let allowScroll = true;\n        _this.paginateOutFit(start, end, context.categories);\n        start = end;\n        end = end + perPage;\n        $(window).on('scroll', function() {\n            if($(window).scrollTop() + $(window).height() > $(document).height() - $('footer.footer').height() - 100) {\n                if (allowScroll) {\n                    if(end > context.categories.length) {\n                        end = context.categories.length;\n                        allowScroll = false;\n                    }\n                    _this.paginateOutFit(start, end, context.categories);\n                    start = end;\n                    end = end + perPage;\n\n                    _this.removeModalOnMobile();\n                }\n            }\n        });\n        \n        _this.removeModalOnMobile();\n        $(window).on('resize', function() {\n            _this.removeModalOnMobile();\n        });\n    }\n\n    removeModalOnMobile(){\n        var isMobile = $(window).width() < 768 ? true : false;\n        console.log('isMobile ? ', isMobile);\n        if(isMobile) {\n            $('.removeModalOnMobile').removeClass('loadSubProducts');\n            $('.removeModalOnMobile').removeAttr('data-reveal-id');\n        } else {\n            $('.removeModalOnMobile').addClass('loadSubProducts');\n            $('.removeModalOnMobile').attr('data-reveal-id', 'subcategory-list');\n        }\n    }\n    paginateOutFit(start, end, categories){\n        console.log('Display from', start, 'to', end);\n        let html = '';\n        for(var i = start; i < end; i++) {\n            html += this.generateOutfitHtml(categories[i]);\n        }\n        $('.productGrid--outfits').append(html);\n    }\n    generateOutfitHtml(category){\n        let imageUrl = category.image ? category.image.data : '';\n        imageUrl = imageUrl.replace('{:size}', 'original');\n        let imageAlt = category.image ? category.image.alt : '';\n        let url = category.url ? category.url : '';\n        let html = `\n        <li class=\"product product--outfits col\">\n            <article class=\"card card--outfits pb-0\">\n                <div class=\"card-wrap card-wrap--outfits position-relative\">\n                    <div class=\"removeModalOnMobile loadSubProducts card-image--outfits\" rel=\"${url}\" data-reveal-id=\"subcategory-list\" data-desktop=\"true\">\n                        <figure class=\"card-figure card-figure--outfits card-figure--h-auto\">\n                            <div class=\"card-img-container card-img-container--outfits\">\n                                <img class=\"card-image lazyautosizpro_skues lazyloaded\" data-sizes=\"auto\" src=\"${imageUrl}\" alt=\"${imageAlt}\" title=\"${imageAlt}\">\n                            </div>\n                        </figure>\n                    </div>\n                    <div class=\"card-body card-body--outfits p-0\">\n                        <a href=\"javascript:void(0);\" rel=\"${url}\" data-reveal-id=\"subcategory-list\" class=\"btn btn-dark loadSubProducts\">Shop this look</a>\n                    </div>\n                </div>\n            </article>\n        </li>`;\n        return html;\n    }\n    \n\n    infiniteScroll() {\n        const elem = document.querySelector('.productGrid');\n        const infScroll = new InfiniteScroll(elem, {\n            path: '.pagination-item--next .pagination-link',\n            append: '.product',\n            history: false,\n            hideNav: '.pagination-list',\n            scrollThreshold: 800,\n        });\n        return infScroll;\n    }\n\n    \n    initFacetedSearch() {\n        const {\n            price_min_evaluation: onMinPriceError,\n            price_max_evaluation: onMaxPriceError,\n            price_min_not_entered: minPriceNotEntered,\n            price_max_not_entered: maxPriceNotEntered,\n            price_invalid_value: onInvalidPrice,\n        } = this.validationDictionary;\n        const $productListingContainer = $('#product-listing-container');\n        const $facetedSearchContainer = $('#faceted-search-container');\n        const productsPerPage = this.context.categoryProductsPerPage;\n        const requestOptions = {\n            config: {\n                category: {\n                    shop_by_price: true,\n                    products: {\n                        limit: productsPerPage,\n                    },\n                },\n            },\n            template: {\n                productListing: 'category/product-listing',\n                sidebar: 'category/sidebar',\n            },\n            showMore: 'category/show-more',\n        };\n\n        this.facetedSearch = new FacetedSearch(requestOptions, (content) => {\n            $productListingContainer.html(content.productListing);\n            $facetedSearchContainer.html(content.sidebar);\n\n            $('body').triggerHandler('compareReset');\n\n            $('html, body').animate({\n                scrollTop: 0,\n            }, 100);\n        }, {\n            validationErrorMessages: {\n                onMinPriceError,\n                onMaxPriceError,\n                minPriceNotEntered,\n                maxPriceNotEntered,\n                onInvalidPrice,\n            },\n        });\n    }\n\n}\n","const forms = {\n    email(value) {\n        const re = /^.+@.+\\..+/;\n        return re.test(value);\n    },\n\n    /**\n     * Validates a password field\n     * @param value\n     * @returns {boolean}\n     */\n    password(value) {\n        return this.notEmpty(value);\n    },\n\n    /**\n     * validates if a field is empty\n     * @param value\n     * @returns {boolean}\n     *\n     */\n    notEmpty(value) {\n        return value.length > 0;\n    },\n};\n\nexport default forms;\n","import _ from 'lodash';\nimport nod from '../nod';\nimport forms from '../models/forms';\n\nconst inputTagNames = [\n    'input',\n    'select',\n    'textarea',\n];\n/**\n * Set up Object with Error Messages on Password Validation. Please use messages in mentioned order\n * @param {string} empty defines error text for empty field\n * @param {string} confirm defines error text for empty confirmation field\n * @param {string} mismatch defines error text if confirm passford mismatches passford field\n * @param {string} invalid defines error text for invalid password charaters sequence\n * @return {object} messages or default texts if nothing is providing\n */\nexport const createPasswordValidationErrorTextObject = (empty, confirm, mismatch, invalid) => ({\n    onEmptyPasswordErrorText: empty,\n    onConfirmPasswordErrorText: confirm,\n    onMismatchPasswordErrorText: mismatch,\n    onNotValidPasswordErrorText: invalid,\n});\n\n\n/**\n * Apply class name to an input element on its type\n * @param {object} input\n * @param {string} formFieldClass\n * @return {object} Element itself\n */\nfunction classifyInput(input, formFieldClass) {\n    const $input = $(input);\n    const $formField = $input.parent(`.${formFieldClass}`);\n    const tagName = $input.prop('tagName').toLowerCase();\n\n    let className = `${formFieldClass}--${tagName}`;\n    let specificClassName;\n\n    // Input can be text/checkbox/radio etc...\n    if (tagName === 'input') {\n        const inputType = $input.prop('type');\n\n        if (_.includes(['radio', 'checkbox', 'submit'], inputType)) {\n            // ie: .form-field--checkbox, .form-field--radio\n            className = `${formFieldClass}--${_.camelCase(inputType)}`;\n        } else {\n            // ie: .form-field--input .form-field--inputText\n            specificClassName = `${className}${_.capitalize(inputType)}`;\n        }\n    }\n\n    // Apply class modifier\n    return $formField\n        .addClass(className)\n        .addClass(specificClassName);\n}\n\n/**\n * Apply class name to each input element in a form based on its type\n * @example\n * // Before\n * <form id=\"form\">\n *     <div class=\"form-field\">\n *         <input type=\"text\">\n *     </div>\n *     <div class=\"form-field\">\n *         <select>...</select>\n *     </div>\n * </form>\n *\n * classifyForm('#form', { formFieldClass: 'form-field' });\n *\n * // After\n * <div class=\"form-field form-field--input form-field--inputText\">...</div>\n * <div class=\"form-field form-field--select\">...</div>\n *\n * @param {string|object} formSelector - selector or element\n * @param {object} options\n * @return {jQuery} Element itself\n */\nexport function classifyForm(formSelector, options = {}) {\n    const $form = $(formSelector);\n    const $inputs = $form.find(inputTagNames.join(', '));\n\n    // Obtain options\n    const { formFieldClass = 'form-field' } = options;\n\n    // Classify each input in a form\n    $inputs.each((__, input) => {\n        classifyInput(input, formFieldClass);\n    });\n\n    return $form;\n}\n\n/**\n * Get id from given field\n * @param {object} $field JQuery field object\n * @return {string}\n */\nfunction getFieldId($field) {\n    const fieldId = $field.prop('name').match(/(\\[.*\\])/);\n\n    if (fieldId && fieldId.length !== 0) {\n        return fieldId[0];\n    }\n\n    return '';\n}\n\n/**\n * Insert hidden field after State/Province field\n * @param {object} $stateField JQuery field object\n */\nfunction insertStateHiddenField($stateField) {\n    const fieldId = getFieldId($stateField);\n    const stateFieldAttrs = {\n        type: 'hidden',\n        name: `FormFieldIsText${fieldId}`,\n        value: '1',\n    };\n\n    $stateField.after($('<input />', stateFieldAttrs));\n}\n\nconst Validators = {\n    /**\n     * Sets up a new validation when the form is dirty\n     * @param validator\n     * @param field\n     * @param {string} errorText describes errorMassage on email validation\n     */\n    setEmailValidation: (validator, field, errorText) => {\n        if (field) {\n            validator.add({\n                selector: field,\n                validate: (cb, val) => {\n                    const result = forms.email(val);\n\n                    cb(result);\n                },\n                errorMessage: errorText,\n            });\n        }\n    },\n\n    /**\n     * Validate password fields\n     * @param validator\n     * @param passwordSelector\n     * @param password2Selector\n     * @param requirements\n     * @param {object} errorTextsObject\n     * @param isOptional\n     */\n    setPasswordValidation: (validator, passwordSelector, password2Selector, requirements, {\n        onEmptyPasswordErrorText, onConfirmPasswordErrorText, onMismatchPasswordErrorText, onNotValidPasswordErrorText,\n    }, isOptional) => {\n        const $password = $(passwordSelector);\n        const passwordValidations = [\n            {\n                selector: passwordSelector,\n                validate: (cb, val) => {\n                    const result = val.length;\n\n                    if (isOptional) {\n                        return cb(true);\n                    }\n\n                    cb(result);\n                },\n                errorMessage: onEmptyPasswordErrorText,\n            },\n            {\n                selector: passwordSelector,\n                validate: (cb, val) => {\n                    const result = val.match(new RegExp(requirements.alpha))\n                        && val.match(new RegExp(requirements.numeric))\n                        && val.length >= requirements.minlength;\n\n                    // If optional and nothing entered, it is valid\n                    if (isOptional && val.length === 0) {\n                        return cb(true);\n                    }\n\n                    cb(result);\n                },\n                errorMessage: onNotValidPasswordErrorText,\n            },\n            {\n                selector: password2Selector,\n                validate: (cb, val) => {\n                    const result = val.length;\n\n                    if (isOptional) {\n                        return cb(true);\n                    }\n\n                    cb(result);\n                },\n                errorMessage: onConfirmPasswordErrorText,\n            },\n            {\n                selector: password2Selector,\n                validate: (cb, val) => {\n                    const result = val === $password.val();\n\n                    cb(result);\n                },\n                errorMessage: onMismatchPasswordErrorText,\n            },\n        ];\n\n        validator.add(passwordValidations);\n    },\n\n    /**\n     * Validate password fields\n     * @param {Nod} validator\n     * @param {Object} selectors\n     * @param {string} selectors.errorSelector\n     * @param {string} selectors.fieldsetSelector\n     * @param {string} selectors.formSelector\n     * @param {string} selectors.maxPriceSelector\n     * @param {string} selectors.minPriceSelector\n     */\n    setMinMaxPriceValidation: (validator, selectors, priceValidationErrorTexts = {}) => {\n        const {\n            errorSelector,\n            fieldsetSelector,\n            formSelector,\n            maxPriceSelector,\n            minPriceSelector,\n        } = selectors;\n\n        // eslint-disable-next-line object-curly-newline\n        const { onMinPriceError, onMaxPriceError, minPriceNotEntered, maxPriceNotEntered, onInvalidPrice } = priceValidationErrorTexts;\n\n        validator.configure({\n            form: formSelector,\n            preventSubmit: true,\n            successClass: '_', // KLUDGE: Don't apply success class\n        });\n\n        validator.add({\n            errorMessage: onMinPriceError,\n            selector: minPriceSelector,\n            validate: `min-max:${minPriceSelector}:${maxPriceSelector}`,\n        });\n\n        validator.add({\n            errorMessage: onMaxPriceError,\n            selector: maxPriceSelector,\n            validate: `min-max:${minPriceSelector}:${maxPriceSelector}`,\n        });\n\n        validator.add({\n            errorMessage: maxPriceNotEntered,\n            selector: maxPriceSelector,\n            validate: 'presence',\n        });\n\n        validator.add({\n            errorMessage: minPriceNotEntered,\n            selector: minPriceSelector,\n            validate: 'presence',\n        });\n\n        validator.add({\n            errorMessage: onInvalidPrice,\n            selector: [minPriceSelector, maxPriceSelector],\n            validate: 'min-number:0',\n        });\n\n        validator.setMessageOptions({\n            selector: [minPriceSelector, maxPriceSelector],\n            parent: fieldsetSelector,\n            errorSpan: errorSelector,\n        });\n    },\n\n    /**\n     * Sets up a new validation when the form is dirty\n     * @param validator\n     * @param field\n     */\n    setStateCountryValidation: (validator, field, errorText) => {\n        if (field) {\n            validator.add({\n                selector: field,\n                validate: 'presence',\n                errorMessage: errorText,\n            });\n        }\n    },\n\n    /**\n     * Removes classes from dirty form if previously checked\n     * @param field\n     */\n    cleanUpStateValidation: (field) => {\n        const $fieldClassElement = $((`[data-type=\"${field.data('fieldType')}\"]`));\n\n        Object.keys(nod.classes).forEach((value) => {\n            if ($fieldClassElement.hasClass(nod.classes[value])) {\n                $fieldClassElement.removeClass(nod.classes[value]);\n            }\n        });\n    },\n};\n\nexport { Validators, insertStateHiddenField };\n","const TRANSLATIONS = 'translations';\nconst isTranslationDictionaryNotEmpty = (dictionary) => !!Object.keys(dictionary[TRANSLATIONS]).length;\nconst chooseActiveDictionary = (...dictionaryJsonList) => {\n    for (let i = 0; i < dictionaryJsonList.length; i++) {\n        const dictionary = JSON.parse(dictionaryJsonList[i]);\n        if (isTranslationDictionaryNotEmpty(dictionary)) {\n            return dictionary;\n        }\n    }\n};\n\n/**\n * defines Translation Dictionary to use\n * @param context provides access to 3 validation JSONs from en.json:\n * validation_messages, validation_fallback_messages and default_messages\n * @returns {Object}\n */\nexport const createTranslationDictionary = (context) => {\n    const { validationDictionaryJSON, validationFallbackDictionaryJSON, validationDefaultDictionaryJSON } = context;\n    const activeDictionary = chooseActiveDictionary(validationDictionaryJSON, validationFallbackDictionaryJSON, validationDefaultDictionaryJSON);\n    const localizations = Object.values(activeDictionary[TRANSLATIONS]);\n    const translationKeys = Object.keys(activeDictionary[TRANSLATIONS]).map(key => key.split('.').pop());\n\n    return translationKeys.reduce((acc, key, i) => {\n        acc[key] = localizations[i];\n        return acc;\n    }, {});\n};\n","import Url from 'url';\n\nconst urlUtils = {\n    getUrl: () => `${window.location.pathname}${window.location.search}`,\n\n    goToUrl: (url) => {\n        window.history.pushState({}, document.title, url);\n        $(window).trigger('statechange');\n    },\n\n    replaceParams: (url, params) => {\n        const parsed = Url.parse(url, true);\n        let param;\n\n        // Let the formatter use the query object to build the new url\n        parsed.search = null;\n\n        for (param in params) {\n            if (params.hasOwnProperty(param)) {\n                parsed.query[param] = params[param];\n            }\n        }\n\n        return Url.format(parsed);\n    },\n\n    buildQueryString: (queryData) => {\n        let out = '';\n        let key;\n        for (key in queryData) {\n            if (queryData.hasOwnProperty(key)) {\n                if (Array.isArray(queryData[key])) {\n                    let ndx;\n\n                    for (ndx in queryData[key]) {\n                        if (queryData[key].hasOwnProperty(ndx)) {\n                            out += `&${key}=${queryData[key][ndx]}`;\n                        }\n                    }\n                } else {\n                    out += `&${key}=${queryData[key]}`;\n                }\n            }\n        }\n\n        return out.substring(1);\n    },\n\n    parseQueryParams: (queryData) => {\n        const params = {};\n\n        for (let i = 0; i < queryData.length; i++) {\n            const temp = queryData[i].split('=');\n\n            if (temp[0] in params) {\n                if (Array.isArray(params[temp[0]])) {\n                    params[temp[0]].push(temp[1]);\n                } else {\n                    params[temp[0]] = [params[temp[0]], temp[1]];\n                }\n            } else {\n                params[temp[0]] = temp[1];\n            }\n        }\n\n        return params;\n    },\n};\n\nexport default urlUtils;\n","import PageManager from './page-manager';\nimport urlUtils from './common/utils/url-utils';\nimport Url from 'url';\n\nexport default class CatalogPage extends PageManager {\n    onSortBySubmit(event, currentTarget) {\n        const url = Url.parse(window.location.href, true);\n        const queryParams = $(currentTarget).serialize().split('=');\n\n        url.query[queryParams[0]] = queryParams[1];\n        delete url.query.page;\n\n        event.preventDefault();\n        window.location = Url.format({ pathname: url.pathname, search: urlUtils.buildQueryString(url.query) });\n    }\n}\n","import { hooks, api } from \"@bigcommerce/stencil-utils\";\nimport _ from \"lodash\";\nimport Url from \"url\";\nimport urlUtils from \"./utils/url-utils\";\nimport modalFactory from \"../global/modal\";\nimport collapsibleFactory from \"./collapsible\";\nimport { Validators } from \"./utils/form-utils\";\nimport nod from \"./nod\";\nimport utils from \"@bigcommerce/stencil-utils\";\nimport carousel from \"./../common/carousel\";\n\nconst defaultOptions = {\n  accordionToggleSelector:\n    \"#facetedSearch .accordion-navigation, #facetedSearch .facetedSearch-toggle\",\n  blockerSelector: \"#facetedSearch .blocker\",\n  clearFacetSelector: \"#facetedSearch .facetedSearch-clearLink\",\n  componentSelector: \"#facetedSearch-navList\",\n  facetNavListSelector: \"#facetedSearch .navList\",\n  priceRangeErrorSelector: \"#facet-range-form .form-inlineMessage\",\n  priceRangeFieldsetSelector: \"#facet-range-form .form-fieldset\",\n  priceRangeFormSelector: \"#facet-range-form\",\n  priceRangeMaxPriceSelector: \"#facet-range-form [name=max_price]\",\n  priceRangeMinPriceSelector: \"#facet-range-form [name=min_price]\",\n  //   showMoreToggleSelector: \"#facetedSearch .accordion-content .toggleLink\",\n  showMoreToggleSelector: \"#facetedSearch #facetedSearch-navList .toggleLink\",\n  facetedSearchFilterItems: \"#facetedSearch-filterItems .form-input\",\n  modal: modalFactory(\"#modal\")[0],\n  modalOpen: false,\n};\n\n/**\n * Faceted search view component\n */\nclass FacetedSearch {\n  /**\n   * @param {object} requestOptions - Object with options for the ajax requests\n   * @param {function} callback - Function to execute after fetching templates\n   * @param {object} options - Configurable options\n   * @example\n   *\n   * let requestOptions = {\n   *      templates: {\n   *          productListing: 'category/product-listing',\n   *          sidebar: 'category/sidebar'\n   *     }\n   * };\n   *\n   * let templatesDidLoad = function(content) {\n   *     $productListingContainer.html(content.productListing);\n   *     $facetedSearchContainer.html(content.sidebar);\n   * };\n   *\n   * let facetedSearch = new FacetedSearch(requestOptions, templatesDidLoad);\n   */\n  constructor(requestOptions, callback, options) {\n    // Private properties\n    this.requestOptions = requestOptions;\n    this.callback = callback;\n    this.options = _.extend({}, defaultOptions, options);\n    this.collapsedFacets = [];\n    this.collapsedFacetItems = [];\n\n    // Init collapsibles\n    collapsibleFactory();\n\n    // Init price validator\n    this.initPriceValidator();\n\n    // Show limited items by default\n    $(this.options.facetNavListSelector).each((index, navList) => {\n      this.collapseFacetItems($(navList));\n    });\n\n    // Mark initially collapsed accordions\n    $(this.options.accordionToggleSelector).each((index, accordionToggle) => {\n      const $accordionToggle = $(accordionToggle);\n      const collapsible = $accordionToggle.data(\"collapsibleInstance\");\n\n      if (collapsible.isCollapsed) {\n        this.collapsedFacets.push(collapsible.targetId);\n      }\n    });\n\n    // Collapse all facets if initially hidden\n    // NOTE: Need to execute after Collapsible gets bootstrapped\n    setTimeout(() => {\n      if ($(this.options.componentSelector).is(\":hidden\")) {\n        this.collapseAllFacets();\n      }\n    });\n\n    // Observe user events\n    this.onStateChange = this.onStateChange.bind(this);\n    this.onToggleClick = this.onToggleClick.bind(this);\n    this.onAccordionToggle = this.onAccordionToggle.bind(this);\n    this.onClearFacet = this.onClearFacet.bind(this);\n    this.onFacetClick = this.onFacetClick.bind(this);\n    this.onRangeSubmit = this.onRangeSubmit.bind(this);\n    this.onSortBySubmit = this.onSortBySubmit.bind(this);\n    this.filterFacetItems = this.filterFacetItems.bind(this);\n\n    this.bindEvents();\n\n    console.log(\"faceted-search.js\");\n  }\n\n  // Public methods\n  refreshView(content) {\n    if (content) {\n      this.callback(content);\n    }\n\n    // Init collapsibles\n    collapsibleFactory();\n\n    // Init price validator\n    this.initPriceValidator();\n\n    // Restore view state\n    this.restoreCollapsedFacets();\n    this.restoreCollapsedFacetItems();\n\n    // Bind events\n    this.bindEvents();\n\n    //console.log(\"display refreshed\");\n  }\n\n  updateView() {\n    $(this.options.blockerSelector).show();\n    console.log(urlUtils.getUrl());\n    //console.log(this.requestOptions);\n    api.getPage(urlUtils.getUrl(), this.requestOptions, (err, content) => {\n      $(this.options.blockerSelector).hide();\n\n      if (err) {\n        throw new Error(err);\n      }\n      // console.log(content);\n      // Refresh view with new content\n      this.refreshView(content);\n\n      // this.customLoadProductSizes();\n      // initialize the slider\n      // $('[data-slick]').slick();\n    });\n  }\n\n  customLoadProductSizes() {\n    var listProducts = $(\".productGrid li.product\");\n    listProducts.each(function (id, li) {\n      // display discounted price\n      //var Product = $(li);\n      var proID = $(this).find(\".ProductIDs\").text();\n      var forProID = $(this).find(\".ProductIDsOnly\").text();\n      var proPrice = $(this).find(\".mainLoadedPrice\").text();\n      var discountedPrice = (\n        Number(proPrice.trim().replace(\"$\", \"\")) * Number(0.9)\n      ).toFixed(2);\n      //console.log(discountedPrice);\n      //console.log(proPrice);\n\n      $(\".discountedPriceCategory-\" + forProID).html(\"$\" + discountedPrice);\n\n      //var Product = $(li);\n      // var proID = $(this).find(\".ProductIDs\").text();\n      // //console.log(proID);\n\n      $(\"#loadQuickView-\" + proID).html(\n        '<div id=\"loaderimage\" class=\"loadingOverlay\" style=\"display: block;position: relative !important; top: 22px!important;\"></div>'\n      );\n      //return;\n      utils.api.product.getById(\n        proID,\n        { template: \"products/quick-view-options\" },\n        (err, response) => {\n          if (err) {\n            throw new Error(err);\n          }\n          // console.log(response);\n          // loop the class\n          var availableSizes = \"\";\n          $(response)\n            .find(\".form-option\")\n            .each(function (i, obj) {\n              //console.log($(this).html());\n              availableSizes +=\n                \"<label class='form-option' >\" + $(this).html() + \"</label>\";\n            });\n\n          $(\"#loadQuickView-\" + proID).html(availableSizes);\n        }\n      );\n    });\n  }\n\n  expandFacetItems($navList) {\n    const id = $navList.attr(\"id\");\n\n    // Remove\n    this.collapsedFacetItems = _.without(this.collapsedFacetItems, id);\n  }\n\n  collapseFacetItems($navList) {\n    const id = $navList.attr(\"id\");\n    const hasMoreResults = $navList.data(\"hasMoreResults\");\n\n    if (hasMoreResults) {\n      this.collapsedFacetItems = _.union(this.collapsedFacetItems, [id]);\n    } else {\n      this.collapsedFacetItems = _.without(this.collapsedFacetItems, id);\n    }\n  }\n\n  toggleFacetItems($navList) {\n    const id = $navList.attr(\"id\");\n\n    // Toggle depending on `collapsed` flag\n    if (_.includes(this.collapsedFacetItems, id)) {\n      this.getMoreFacetResults($navList);\n\n      return true;\n    }\n\n    this.collapseFacetItems($navList);\n\n    return false;\n  }\n\n  getMoreFacetResults($navList) {\n    const facet = $navList.data(\"facet\");\n    const facetUrl = urlUtils.getUrl();\n\n    this.options.modal.open();\n    this.options.modalOpen = true;\n\n    if (this.requestOptions.showMore) {\n      api.getPage(\n        facetUrl,\n        {\n          template: this.requestOptions.showMore,\n          params: {\n            list_all: facet,\n          },\n        },\n        (err, response) => {\n          if (err) {\n            throw new Error(err);\n          }\n\n          //   this.options.modal.open();\n          //   this.options.modalOpen = true;\n          this.options.modal.updateContent(response);\n        }\n      );\n    } else {\n      this.options.modal.close();\n      this.options.modalOpen = false;\n    }\n\n    this.collapseFacetItems($navList);\n\n    return false;\n  }\n\n  filterFacetItems(event) {\n    const $items = $(\".navList-item\");\n    const query = $(event.currentTarget).val().toLowerCase();\n\n    $items.each((index, element) => {\n      const text = $(element).text().toLowerCase();\n      if (text.indexOf(query) !== -1) {\n        $(element).show();\n      } else {\n        $(element).hide();\n      }\n    });\n  }\n\n  expandFacet($accordionToggle) {\n    const collapsible = $accordionToggle.data(\"collapsibleInstance\");\n\n    collapsible.open();\n  }\n\n  collapseFacet($accordionToggle) {\n    const collapsible = $accordionToggle.data(\"collapsibleInstance\");\n\n    collapsible.close();\n  }\n\n  collapseAllFacets() {\n    const $accordionToggles = $(this.options.accordionToggleSelector);\n\n    $accordionToggles.each((index, accordionToggle) => {\n      const $accordionToggle = $(accordionToggle);\n\n      this.collapseFacet($accordionToggle);\n    });\n  }\n\n  expandAllFacets() {\n    const $accordionToggles = $(this.options.accordionToggleSelector);\n\n    $accordionToggles.each((index, accordionToggle) => {\n      const $accordionToggle = $(accordionToggle);\n\n      this.expandFacet($accordionToggle);\n    });\n  }\n\n  // Private methods\n  initPriceValidator() {\n    if ($(this.options.priceRangeFormSelector).length === 0) {\n      return;\n    }\n\n    const validator = nod();\n    const selectors = {\n      errorSelector: this.options.priceRangeErrorSelector,\n      fieldsetSelector: this.options.priceRangeFieldsetSelector,\n      formSelector: this.options.priceRangeFormSelector,\n      maxPriceSelector: this.options.priceRangeMaxPriceSelector,\n      minPriceSelector: this.options.priceRangeMinPriceSelector,\n    };\n\n    Validators.setMinMaxPriceValidation(\n      validator,\n      selectors,\n      this.options.validationErrorMessages\n    );\n\n    this.priceRangeValidator = validator;\n  }\n\n  restoreCollapsedFacetItems() {\n    const $navLists = $(this.options.facetNavListSelector);\n\n    // Restore collapsed state for each facet\n    $navLists.each((index, navList) => {\n      const $navList = $(navList);\n      const id = $navList.attr(\"id\");\n      const shouldCollapse = _.includes(this.collapsedFacetItems, id);\n\n      if (shouldCollapse) {\n        this.collapseFacetItems($navList);\n      } else {\n        this.expandFacetItems($navList);\n      }\n    });\n  }\n\n  restoreCollapsedFacets() {\n    const $accordionToggles = $(this.options.accordionToggleSelector);\n\n    $accordionToggles.each((index, accordionToggle) => {\n      const $accordionToggle = $(accordionToggle);\n      const collapsible = $accordionToggle.data(\"collapsibleInstance\");\n      const id = collapsible.targetId;\n      const shouldCollapse = _.includes(this.collapsedFacets, id);\n\n      if (shouldCollapse) {\n        this.collapseFacet($accordionToggle);\n      } else {\n        this.expandFacet($accordionToggle);\n      }\n    });\n  }\n\n  bindEvents() {\n    // Clean-up\n    this.unbindEvents();\n\n    // DOM events\n    $(window).on(\"statechange\", this.onStateChange);\n    $(window).on(\"popstate\", this.onPopState);\n    $(document).on(\n      \"click\",\n      this.options.showMoreToggleSelector,\n      this.onToggleClick\n    );\n    $(document).on(\n      \"toggle.collapsible\",\n      this.options.accordionToggleSelector,\n      this.onAccordionToggle\n    );\n    $(document).on(\n      \"keyup\",\n      this.options.facetedSearchFilterItems,\n      this.filterFacetItems\n    );\n    $(this.options.clearFacetSelector).on(\"click\", this.onClearFacet);\n\n    // Hooks\n    hooks.on(\"facetedSearch-facet-clicked\", this.onFacetClick);\n    hooks.on(\"facetedSearch-range-submitted\", this.onRangeSubmit);\n    hooks.on(\"sortBy-submitted\", this.onSortBySubmit);\n  }\n\n  unbindEvents() {\n    // DOM events\n    $(window).off(\"statechange\", this.onStateChange);\n    $(window).off(\"popstate\", this.onPopState);\n    $(document).off(\n      \"click\",\n      this.options.showMoreToggleSelector,\n      this.onToggleClick\n    );\n    $(document).off(\n      \"toggle.collapsible\",\n      this.options.accordionToggleSelector,\n      this.onAccordionToggle\n    );\n    $(document).off(\n      \"keyup\",\n      this.options.facetedSearchFilterItems,\n      this.filterFacetItems\n    );\n    $(this.options.clearFacetSelector).off(\"click\", this.onClearFacet);\n\n    // Hooks\n    hooks.off(\"facetedSearch-facet-clicked\", this.onFacetClick);\n    hooks.off(\"facetedSearch-range-submitted\", this.onRangeSubmit);\n    hooks.off(\"sortBy-submitted\", this.onSortBySubmit);\n  }\n\n  onClearFacet(event) {\n    const $link = $(event.currentTarget);\n    const url = $link.attr(\"href\");\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    // Update URL\n    urlUtils.goToUrl(url);\n  }\n\n  onToggleClick(event) {\n    const $toggle = $(event.currentTarget);\n    const $navList = $($toggle.attr(\"href\"));\n\n    // Prevent default\n    event.preventDefault();\n\n    // Toggle visible items\n    this.toggleFacetItems($navList);\n  }\n\n  onFacetClick(event, currentTarget) {\n    const $link = $(currentTarget);\n    const url = $link.attr(\"href\");\n\n    event.preventDefault();\n\n    $link.toggleClass(\"is-selected\");\n\n    // Update URL\n    urlUtils.goToUrl(url);\n\n    if (this.options.modalOpen) {\n      this.options.modal.close();\n    }\n  }\n\n  onSortBySubmit(event, currentTarget) {\n    const url = Url.parse(window.location.href, true);\n    const queryParams = $(currentTarget).serialize().split(\"=\");\n\n    url.query[queryParams[0]] = queryParams[1];\n    delete url.query.page;\n\n    // Url object `query` is not a traditional JavaScript Object on all systems, clone it instead\n    const urlQueryParams = {};\n    Object.assign(urlQueryParams, url.query);\n\n    event.preventDefault();\n\n    urlUtils.goToUrl(\n      Url.format({\n        pathname: url.pathname,\n        search: urlUtils.buildQueryString(urlQueryParams),\n      })\n    );\n  }\n\n  onRangeSubmit(event, currentTarget) {\n    event.preventDefault();\n\n    if (!this.priceRangeValidator.areAll(nod.constants.VALID)) {\n      return;\n    }\n\n    const url = Url.parse(window.location.href, true);\n    let queryParams = decodeURI($(currentTarget).serialize()).split(\"&\");\n    queryParams = urlUtils.parseQueryParams(queryParams);\n\n    for (const key in queryParams) {\n      if (queryParams.hasOwnProperty(key)) {\n        url.query[key] = queryParams[key];\n      }\n    }\n\n    // Url object `query` is not a traditional JavaScript Object on all systems, clone it instead\n    const urlQueryParams = {};\n    Object.assign(urlQueryParams, url.query);\n\n    urlUtils.goToUrl(\n      Url.format({\n        pathname: url.pathname,\n        search: urlUtils.buildQueryString(urlQueryParams),\n      })\n    );\n  }\n\n  onStateChange() {\n    //this.updateView();\n    // reload the page, instead of ajax refresh view\n    return window.location.reload();\n  }\n\n  onAccordionToggle(event) {\n    const $accordionToggle = $(event.currentTarget);\n    const collapsible = $accordionToggle.data(\"collapsibleInstance\");\n    const id = collapsible.targetId;\n\n    if (collapsible.isCollapsed) {\n      this.collapsedFacets = _.union(this.collapsedFacets, [id]);\n    } else {\n      this.collapsedFacets = _.without(this.collapsedFacets, id);\n    }\n  }\n\n  onPopState() {\n    const currentUrl = window.location.href;\n    const searchParams = new URLSearchParams(currentUrl);\n    // If searchParams does not contain a page value then modify url query string to have page=1\n    if (!searchParams.has(\"page\")) {\n      const linkUrl = $(\".pagination-link\").attr(\"href\");\n      const re = /page=[0-9]+/i;\n      const updatedLinkUrl = linkUrl.replace(re, \"page=1\");\n      window.history.replaceState({}, document.title, updatedLinkUrl);\n    }\n    $(window).trigger(\"statechange\");\n  }\n}\n\nexport default FacetedSearch;\n"],"sourceRoot":""}